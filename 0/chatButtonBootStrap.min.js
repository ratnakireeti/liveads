function lpEndChat(){lpChatWidgetUI.endChatRequest()}function lpLoadChat(){lpChatWidgetUI.loadChat()}function lpChatOnPageLoad(){lpChatWidgetUI.chatOnPageLoad()}function lpChatWizInfo(){(new lpCWTagUI.LPChatWidgetLogger).info("Initializing Chat Widget Bootstrap","Version ["+lpCWTagConst.VERSION+"]")}window.lpCWTagUI=window.lpCWTagUI||{},lpCWTagUI.LPChatWidgetLogger=lpCWTagUI.LPChatWidgetLogger||function(){function e(e,t){var n="000"+e;return n.substr(n.length-t)}function t(t,n,a,i){if(i){var o=new Date;try{n="string"==typeof n?n:JSON.stringify(n),a="string"==typeof a?a:JSON.stringify(a)}catch(l){n=l,a="..."}o=""+e(o.getHours(),2)+":"+e(o.getMinutes(),2)+":"+e(o.getSeconds(),2)+":"+e(o.getMilliseconds(),3),window.console&&console.log||(console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}),console.log(o+" "+t+" : "+n+(""==a?"":" : "+a))}}var n=this;n.debug=function(e,n){t(lpCWTagConst.LOGGER_NAME_BOOTSTAP,e||"",n||"",lpCWTagConst.DEBUG_ENABLE)},n.info=function(e,n){t(lpCWTagConst.LOGGER_NAME_BOOTSTAP,e||"",n||"",lpCWTagConst.INFO_ENABLE)}},lpCWTagUI.LPChatWidgetUI=lpCWTagUI.LPChatWidgetUI||function(e){function t(e){return document.getElementById(e)}function n(e){"undefined"!=typeof e&&(e.style.display="block")}function a(e){"undefined"!=typeof e&&(e.style.display="none")}function i(e){a(t(e))}function o(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function l(){function e(e){y.debug("lpChatBuildFrame","appendChatContainer"),t("lpChatWizContainerNew").appendChild(e),t("lpChatWizContainerNew").style.cssText="width:"+lpQueryParams.adWidth+"px; height:"+lpQueryParams.adHeight+"px; position: absolute; z-index:-1;display:none;"}if(W)y.debug("lpChatBuildFrame","chat window already loaded");else{y.debug("lpChatBuildFrame","...");document.body;try{b.registerOnMessage(),y.debug("lpChatBuildFrame","registerOnMessage"),T=document.createElement("div"),T.id="lpChatWizContainer1",T.style.display="none",e(T),T.innerHTML=m(),E=document.createElement("div"),E.id="lpChatiFrameContainer",E.className="lpPosRel",T.appendChild(E),N=document.createElement("iframe"),N.id="lpChatiFrame",N.className="lpChatiFrame",N.src=C(),N.scrolling="no",N.frameBorder="0",N.style.border="none",N.style.width="100%",N.style.height="100%",N.setAttribute("allowtransparency","true"),E.appendChild(N),y.debug("lpChatBuildFrame","getFrameSource: "+C()),o(N,"load",r),W=!0,b.bindEvents()}catch(n){y.debug("lpChatBuildFrame","Exception occurred",n)}}}function r(){y.debug("flagChatFrameLoaded","method invoke"),S=!0}function d(){var e=C();return e.indexOf("https")>-1?"https://"+e.substr(8).split("/")[0]:"http://"+e.substr(7).split("/")[0]}function s(){return lpCWTagConst.CHAT_BASE_URL.replace(/,\s*$/,"")}function C(){var e=s()+lpCWTagConst.CHAT_LOCATION_URI+lpCWTagConst.CHAT_LOCATION_URI2+"lpChatWireFrame.html?v"+lpCWTagConst.VERSION+"&lpAccNumber="+lpQueryParams.lpAccNumber+"&chatStyle="+lpQueryParams.ChatStyle;return e}function p(e){return y.debug("isSameOrigin respDomain="+e,"targetDomain: "+d()),d()==e}function u(e){if(y.debug("parentFrame sending postmsg to ="+d(),e),!c().postMessage)throw new Error("Your browser does not support the postMessage method!");c().postMessage(JSON.stringify(e),d())}function c(){var e=document.getElementById("lpChatiFrame");return e.contentWindow||e.contentDocument}function g(){y.debug("fireLPChat","...");var t="sales-english",n="",a="",i="",o="",l="",r="";"undefined"!=typeof e.lpChatSkill&&(t=e.lpChatSkill),"undefined"!=typeof e.lpOfflineSurveyNameOverride&&(a=e.lpOfflineSurveyNameOverride),"undefined"!=typeof e.lpPreChatSurveyNameOverride&&(i=e.lpPreChatSurveyNameOverride),"undefined"!=typeof e.lpExitChatSurveyNameOverride&&(o=e.lpExitChatSurveyNameOverride),"undefined"!=typeof e.lpPCIGenID&&(L=e.lpPCIGenID),"undefined"!=e.lpMTagConfig&&e.lpMTagConfig.FPC_CONT&&(n=e.lpMTagConfig.FPC_CONT),e.lpMTagConfig&&e.lpMTagConfig.LPSID_VAR&&(I=e.lpMTagConfig.LPSID_VAR),"undefined"!=typeof e.lpWebserviceFailureOfflineSurveyNameOverride&&(l=e.lpWebserviceFailureOfflineSurveyNameOverride),"undefined"!=typeof e.lpNonInteractiveChatSurveyNameOverride&&(r=e.lpNonInteractiveChatSurveyNameOverride);var d=lpMTagConfig.chatWizButtonName?lpMTagConfig.chatWizButtonName:"";u({lpEmbChatWiz:"LPNVCF",CMD:"CONTROL",value:"lpStartChatButtonClicked",skill:t,lpChatWizButtonName:d,lpVisitorSessionId:I,WS_ENABLE:L,siteContainer:n,offlineSurveyNameOverride:a,preChatSurveyNameOverride:i,exitChatSurveyNameOverride:o,webserviceFailureOfflineSurveyNameOverride:l,nonInteractiveChatSurveyNameOverride:r})}function h(){y.debug("closeButtonClicked","method is invoked"),u({lpEmbChatWiz:"LPNVCF",CMD:"CONTROL",value:"HIDE_CONTAINER"})}function f(){y.debug("endChat","method is invoked"),O=!1,v(!1)}function v(e){y.debug("showChatWizContainerVisibility","..."),e?(n(T),i(lpQueryParams.dynamicButtonName),t("lpChatWizContainerNew").style.display="block",t("lpChatWizContainerNew").style.zIndex="1"):(a(T),showButtonOnDelay(0),t("lpChatWizContainerNew").style.display="none",t("lpChatWizContainerNew").style.zIndex="-1")}function m(){var e='<div id="lpChatTitleContainer" class="lpRight"><div id="lpChatTitleDragArea" class="lpLeft"><div class="lpLeft"><span class="lpChatTitleContainerLogo lpLeft lpCustSpriteBackground lpCustChatLogoSmall" ></span></div><div id="lpChatTitleTxt" class="lpLeft lpChatHeaderText noselect" unselectable="on">'+lpCWTagConst.lpChatTitleVal+'</div></div><div class="lpRight lpHeaderActionbuttonsContainer" style="">';return lpCWTagConst.enableDockUnDock&&(e+='<div class="lpHeaderActionbuttons lpHoverButton lpPointer" data-msg="'+lpCWTagConst.lpChatTitleUndock+'" id="lpChatPopOutBtn" ><span id="lpChatPopOutBtnImg" class="lpPointer lpCustSpriteBackground lpCustChatIconPopOut" ></span></div>'),e+='<div class="lpHeaderActionbuttons lpHoverButton lpPointer" data-msg="Minimize" id="lpChatMinizeBtn" ><span id="lpChatMinizeBtnImg" class="lpPointer lpCustSpriteBackground lpCustChatIconMinimize" ></span></div><div class="lpHeaderActionbuttons lpHoverButton lpPointer" data-msg="'+lpCWTagConst.lpChatTitleClose+'" id="lpChatEndChatBtn" ><span class="lpPointer lpCustSpriteBackground lpCustChatIconClose" ></span></div></div><div class="lpClear"></div></div><div class="lpClear"></div>'}var T,E,N,b=this,y=new lpCWTagUI.LPChatWidgetLogger,W=!1,O=!1,I="",L=lpCWTagConst.WS_ENABLE,S=!1;b.endChatRequest=function(){h()},b.debugEnable=function(){lpCWTagConst.DEBUG_ENABLE=!0,u({lpEmbChatWiz:"LPNVCF",CMD:"DEBUG",value:"ENABLE"})},b.debugDisable=function(){lpCWTagConst.DEBUG_ENABLE=!1,u({lpEmbChatWiz:"LPNVCF",CMD:"DEBUG",value:"DISABLE"})},b.debug=function(e,t){y.debug(e,t)},b.loadChat=function(){if(y.debug("loadChat","method invoked"),l(),O)v(!0),y.debug("loadChat","an active chat session found. Continuing the existing session");else{y.debug("loadChat","an active chat session not found, about fireChat");var e=0,t=setInterval(function(){e+=500,e>=1e4?(clearInterval(t),y.info("loadChat","iframe content exceeded maximun load time of "+e+" seconds. Suggest to reload page")):(y.debug("loadChat","waiting for iFrame content to load..chatFrameLoaded="+S),S&&(y.debug("loadChat","iFrame content fully loaded"),g(),clearInterval(t)))},500)}},b.chatOnPageLoad=function(){y.info("chatOnPageLoad","starting..."),l()},b.registerOnMessage=function(){e.addEventListener?e.addEventListener("message",b.receiveChatPostMessage,!1):e.attachEvent("onmessage",b.receiveChatPostMessage)},b.receiveChatPostMessage=function(e){lpCWTagConst.DEBUG_ENABLE&&p(e.origin)&&y.debug("receiveChatPostMessageParent",e.data);try{var t=JSON.parse(e.data);"LPNVPF"==t.lpEmbChatWiz&&("FLASHING"==t.CMD?"START"==t.value?flashingStart():flashingStop():"CONTROL"==t.CMD&&("SHOW_CONTAINER"==t.value?v(!0):"END_CHAT"==t.value?f():"HIDE_CONTAINER"==t.value?v(!1):"CHAT_STATE_ACTIVE"==t.value?O=!0:"CHAT_STATE_INACTIVE"==t.value&&(O=!1)))}catch(n){y.debug("lpReceiveChatPostMessage. Exception occurred",n)}},b.bindEvents=function(){y.debug("bindEvents","..."),o(t("lpChatEndChatBtn"),"click",h),y.debug("bindEvents","complete")},b.isChatWinLoaded=function(){return W},b.webServicesEnable=function(){L=!0},b.webServicesDisable=function(){L=!1},b.embeddedChatVersion=function(){return lpCWTagConst.VERSION}},lpChatWidgetUI=new lpCWTagUI.LPChatWidgetUI(window),lpChatWizInfo();